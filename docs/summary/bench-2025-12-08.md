# OCR Bench — 2025-12-08

目标：记录基础镜像（默认 GPU/CPU 配置）在本机的 p50/p95/p99 与成功率，用于后续对比。

## 测试环境
- 访问端口：`http://localhost:5215/ocr`
- 图片：`test.jpg`（仓库附带示例）
- 并发/请求数：示例 1/4/8 并发，各 16 请求（可按需调整）

## 命令
```bash
python scripts/bench/bench_ocr.py --url http://localhost:5215/ocr --image test.jpg --concurrency 1 --requests 16
python scripts/bench/bench_ocr.py --url http://localhost:5215/ocr --image test.jpg --concurrency 4 --requests 16
python scripts/bench/bench_ocr.py --url http://localhost:5215/ocr --image test.jpg --concurrency 8 --requests 16
```

## 结果（填充你的输出）
- c=1: { ok: __, err: __, p50: __, p95: __, p99: __, avg: __ }
- c=4: { ok: __, err: __, p50: __, p95: __, p99: __, avg: __ }
- c=8: { ok: __, err: __, p50: __, p95: __, p99: __, avg: __ }

> 备注：若首次请求较慢，建议先进行一次 warmup，再开始统计；也可提高 `--requests` 以获得更稳定的分位数统计。
{'url': 'http://localhost:5215/ocr', 'concurrency': 1, 'requests': 16, 'ok': 0, 'err': 16, 'p50': 0.0082, 'p95': 0.0177, 'p99': 0.0177, 'avg': 0.0104}
{'url': 'http://localhost:5215/ocr', 'concurrency': 4, 'requests': 16, 'ok': 0, 'err': 16, 'p50': 0.025, 'p95': 0.0426, 'p99': 0.0426, 'avg': 0.029}
{'url': 'http://localhost:5215/ocr', 'concurrency': 8, 'requests': 16, 'ok': 0, 'err': 16, 'p50': 0.0581, 'p95': 0.0746, 'p99': 0.0746, 'avg': 0.0567}
{'url': 'http://paddleocr-server:5000/ocr', 'concurrency': 1, 'requests': 16, 'ok': 16, 'err': 0, 'p50': 1.2246, 'p95': 1.3547, 'p99': 1.3547, 'avg': 1.318}
{'url': 'http://paddleocr-server:5000/ocr', 'concurrency': 4, 'requests': 16, 'ok': 16, 'err': 0, 'p50': 4.8994, 'p95': 5.073, 'p99': 5.073, 'avg': 4.6128}
{'url': 'http://paddleocr-server:5000/ocr', 'concurrency': 8, 'requests': 16, 'ok': 16, 'err': 0, 'p50': 8.9178, 'p95': 12.8759, 'p99': 12.8759, 'avg': 9.3991}
{'url': 'http://paddleocr-server:5000/ocr', 'concurrency': 1, 'requests': 16, 'ok': 16, 'err': 0, 'p50': 1.1871, 'p95': 1.2841, 'p99': 1.2841, 'avg': 1.195}
{'url': 'http://paddleocr-server:5000/ocr', 'concurrency': 4, 'requests': 16, 'ok': 16, 'err': 0, 'p50': 3.9226, 'p95': 4.0472, 'p99': 4.0472, 'avg': 3.7418}
{'url': 'http://paddleocr-server:5000/ocr', 'concurrency': 8, 'requests': 16, 'ok': 16, 'err': 0, 'p50': 6.9917, 'p95': 9.1908, 'p99': 9.1908, 'avg': 6.896}
